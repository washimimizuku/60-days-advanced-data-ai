# Day 39: MLOps Pipeline - Environment Configuration Template
# Copy this file to .env and update with your specific values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=mlops_db
POSTGRES_USER=mlops_user
POSTGRES_PASSWORD=mlops_password

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# OBJECT STORAGE CONFIGURATION
# =============================================================================

# MinIO Configuration (S3-compatible)
MINIO_HOST=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET_NAME=mlops-artifacts
MINIO_SECURE=false

# AWS S3 Configuration (for production)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_DEFAULT_REGION=us-west-2
S3_BUCKET_NAME=your-mlops-bucket

# =============================================================================
# MLFLOW CONFIGURATION
# =============================================================================

# MLflow Tracking Server
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=churn_prediction
MLFLOW_ARTIFACT_ROOT=s3://mlflow-artifacts/
MLFLOW_BACKEND_STORE_URI=postgresql://mlops_user:mlops_password@localhost:5432/mlops_db

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Model Registry
MODEL_REGISTRY_NAME=churn_prediction_model
MODEL_STAGE=Production
MODEL_VERSION=latest

# Model Performance Thresholds
MIN_MODEL_AUC=0.85
MAX_INFERENCE_LATENCY_MS=100
MAX_FEATURE_SERVING_LATENCY_MS=10
DRIFT_THRESHOLD=0.1
RETRAINING_THRESHOLD=0.05

# =============================================================================
# API CONFIGURATION
# =============================================================================

# FastAPI Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# Authentication
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# =============================================================================
# A/B TESTING CONFIGURATION
# =============================================================================

# A/B Testing Settings
AB_TEST_ENABLED=false
AB_TEST_TRAFFIC_SPLIT=50
AB_TEST_MIN_SAMPLES=1000
AB_TEST_SIGNIFICANCE_LEVEL=0.05
AB_TEST_MODEL_A=v1
AB_TEST_MODEL_B=v2

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Prometheus Configuration
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp

# Grafana Configuration
GRAFANA_HOST=localhost
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123

# Monitoring Thresholds
MONITORING_WINDOW_HOURS=24
ALERT_COOLDOWN_MINUTES=30
MAX_PREDICTION_LATENCY_MS=100
MIN_PREDICTION_ACCURACY=0.80

# =============================================================================
# FEATURE STORE CONFIGURATION
# =============================================================================

# Feast Configuration
FEAST_REPO_PATH=./feature_store
FEAST_ONLINE_STORE_TYPE=redis
FEAST_OFFLINE_STORE_TYPE=file
FEAST_REGISTRY_TYPE=file

# Feature Serving
FEATURE_SERVING_HOST=localhost
FEATURE_SERVING_PORT=6566
FEATURE_TTL_HOURS=24

# =============================================================================
# AIRFLOW CONFIGURATION
# =============================================================================

# Airflow Settings
AIRFLOW_HOME=/opt/airflow
AIRFLOW_EXECUTOR=LocalExecutor
AIRFLOW_FERNET_KEY=81HqDtbqAywKSOumSha3BhWNOdQ26slT6K0YaZeZyPs=
AIRFLOW_WEBSERVER_SECRET_KEY=mlops_secret_key
AIRFLOW_LOAD_EXAMPLES=False

# Airflow Database
AIRFLOW_DATABASE_URL=postgresql+psycopg2://mlops_user:mlops_password@localhost:5432/mlops_db

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# SSL/TLS Configuration
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# CORS Configuration
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE"]
CORS_ALLOW_HEADERS=["*"]

# Security Headers
SECURITY_HEADERS_ENABLED=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging Settings
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE_PATH=./logs/mlops_pipeline.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# Structured Logging
STRUCTURED_LOGGING=true
LOG_JSON_FORMAT=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Resource Limits
MAX_WORKERS=4
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT_SECONDS=30
CONNECTION_POOL_SIZE=20

# Caching
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# Batch Processing
BATCH_SIZE=1000
MAX_BATCH_SIZE=10000
BATCH_TIMEOUT_SECONDS=60

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Settings
DEBUG=false
DEVELOPMENT_MODE=false
RELOAD_ON_CHANGE=false

# Testing
TEST_DATABASE_URL=postgresql://mlops_user:mlops_password@localhost:5432/mlops_test_db
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Slack Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#mlops-alerts
SLACK_USERNAME=MLOps Bot

# Email Notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@company.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=mlops-alerts@company.com
EMAIL_TO=team@company.com

# PagerDuty Integration
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-integration-key

# =============================================================================
# BUSINESS METRICS CONFIGURATION
# =============================================================================

# Business KPIs
CHURN_COST_PER_CUSTOMER=500
RETENTION_VALUE_PER_CUSTOMER=2000
INTERVENTION_COST=50
CAMPAIGN_SUCCESS_RATE=0.25

# Revenue Tracking
MONTHLY_REVENUE_TARGET=1000000
CHURN_IMPACT_THRESHOLD=0.05

# =============================================================================
# COMPLIANCE CONFIGURATION
# =============================================================================

# Data Privacy
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=2555  # 7 years
PII_ENCRYPTION=true

# Audit Trail
AUDIT_LOGGING=true
AUDIT_RETENTION_DAYS=2555
COMPLIANCE_REPORTING=true

# Model Governance
MODEL_APPROVAL_REQUIRED=true
BIAS_MONITORING=true
EXPLAINABILITY_REQUIRED=true

# =============================================================================
# KUBERNETES CONFIGURATION (for production)
# =============================================================================

# Kubernetes Settings
K8S_NAMESPACE=mlops-pipeline
K8S_SERVICE_ACCOUNT=mlops-service-account
K8S_IMAGE_PULL_POLICY=Always

# Resource Requests and Limits
K8S_CPU_REQUEST=500m
K8S_CPU_LIMIT=2000m
K8S_MEMORY_REQUEST=1Gi
K8S_MEMORY_LIMIT=4Gi

# Auto-scaling
K8S_MIN_REPLICAS=2
K8S_MAX_REPLICAS=10
K8S_TARGET_CPU_UTILIZATION=70

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Data Sources
EXTERNAL_API_BASE_URL=https://api.external-service.com
EXTERNAL_API_KEY=your-external-api-key
EXTERNAL_API_TIMEOUT=30

# Third-party Services
DATADOG_API_KEY=your-datadog-api-key
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
ENABLE_ADVANCED_MONITORING=true
ENABLE_AUTO_RETRAINING=true
ENABLE_CANARY_DEPLOYMENT=true
ENABLE_SHADOW_MODE=false
ENABLE_ONLINE_LEARNING=false

# Experimental Features
ENABLE_FEDERATED_LEARNING=false
ENABLE_QUANTUM_ML=false
ENABLE_EDGE_DEPLOYMENT=false