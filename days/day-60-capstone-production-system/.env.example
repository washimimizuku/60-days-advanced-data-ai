# Day 60: Capstone Production System - Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL - Primary customer data store
POSTGRES_URL=postgresql://analytics_user:secure_password@localhost:5432/customers
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=customers
POSTGRES_USER=analytics_user
POSTGRES_PASSWORD=secure_password
POSTGRES_MAX_CONNECTIONS=20

# MongoDB - Event and session data
MONGODB_URL=mongodb://admin:password@localhost:27017/events
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DB=events
MONGODB_USER=admin
MONGODB_PASSWORD=password

# Redis - Caching and real-time features
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# STREAMING AND MESSAGING
# =============================================================================

# Apache Kafka - Event streaming
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

# Kafka Topics
KAFKA_CUSTOMER_EVENTS_TOPIC=customer-analytics.public.customers
KAFKA_TRANSACTION_EVENTS_TOPIC=customer-analytics.public.transactions
KAFKA_BEHAVIOR_EVENTS_TOPIC=customer-analytics.public.events

# =============================================================================
# ML PLATFORM CONFIGURATION
# =============================================================================

# MLflow - Model tracking and registry
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=customer_analytics
MLFLOW_ARTIFACT_ROOT=s3://customer-analytics-mlflow/artifacts
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow:mlflow@localhost:5432/mlflow

# Feast Feature Store
FEAST_REPO_PATH=./feature_repo
FEAST_REGISTRY_PATH=data/registry.db
FEAST_ONLINE_STORE_TYPE=redis
FEAST_OFFLINE_STORE_TYPE=file

# Model Configuration
MODEL_CHURN_NAME=churn_prediction
MODEL_CHURN_VERSION=production
MODEL_RECOMMENDATION_NAME=recommendation_engine
MODEL_RECOMMENDATION_VERSION=production

# =============================================================================
# GENAI AND LLM CONFIGURATION
# =============================================================================

# OpenAI API
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.1

# ChromaDB - Vector database
CHROMA_HOST=localhost
CHROMA_PORT=8000
CHROMA_PERSIST_DIRECTORY=./customer_knowledge_base

# LangChain Configuration
LANGCHAIN_TRACING_V2=true
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=your-langchain-api-key
LANGCHAIN_PROJECT=customer-analytics

# =============================================================================
# AWS CLOUD CONFIGURATION
# =============================================================================

# AWS Credentials
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_SESSION_TOKEN=

# AWS Services
AWS_S3_BUCKET=customer-analytics-data
AWS_S3_PREFIX=data/
AWS_KINESIS_STREAM=customer-events-stream
AWS_GLUE_DATABASE=customer_analytics
AWS_GLUE_TABLE=customer_features

# EKS Configuration
EKS_CLUSTER_NAME=customer-analytics-cluster
EKS_NODE_GROUP=customer-analytics-nodes
EKS_NAMESPACE=customer-analytics

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment Settings
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
LOG_FORMAT=json

# API Configuration
API_HOST=0.0.0.0
API_PORT=8080
API_WORKERS=4
API_RELOAD=true

# Security
SECRET_KEY=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics

# Grafana
GRAFANA_HOST=localhost
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Jaeger Tracing
JAEGER_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=customer-analytics-api

# Structured Logging
STRUCTLOG_ENABLED=true
LOG_JSON_FORMAT=true
LOG_INCLUDE_TIMESTAMP=true
LOG_INCLUDE_LEVEL=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Connection Pools
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Caching
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=10000
FEATURE_CACHE_TTL=1800

# API Performance
API_TIMEOUT_SECONDS=30
API_MAX_REQUEST_SIZE=10485760  # 10MB
API_COMPRESSION_ENABLED=true

# ML Model Performance
MODEL_BATCH_SIZE=100
MODEL_TIMEOUT_SECONDS=10
MODEL_CACHE_SIZE=5

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Tools
PYTEST_ENABLED=true
COVERAGE_ENABLED=true
LINTING_ENABLED=true

# Hot Reload
AUTO_RELOAD=true
RELOAD_DIRS=["./"]
RELOAD_INCLUDES=["*.py"]

# Debug Settings
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_KAFKA=false

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and modify these for production deployment

# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# API_RELOAD=false
# API_WORKERS=8

# # Production Database URLs
# POSTGRES_URL=postgresql://user:pass@prod-postgres:5432/customers
# MONGODB_URL=mongodb://user:pass@prod-mongodb:27017/events
# REDIS_URL=redis://prod-redis:6379/0

# # Production ML Services
# MLFLOW_TRACKING_URI=https://mlflow.company.com
# CHROMA_HOST=prod-chromadb

# # Production Security
# SECRET_KEY=production-secret-key-from-secrets-manager
# CORS_ORIGINS=["https://analytics.company.com"]

# # Production Monitoring
# JAEGER_ENABLED=true
# PROMETHEUS_ENABLED=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
ENABLE_GENAI_INSIGHTS=true
ENABLE_REAL_TIME_FEATURES=true
ENABLE_A_B_TESTING=true
ENABLE_COST_OPTIMIZATION=true
ENABLE_ADVANCED_ANALYTICS=true

# Experimental Features
ENABLE_EXPERIMENTAL_MODELS=false
ENABLE_BETA_ENDPOINTS=false
ENABLE_PERFORMANCE_PROFILING=false

# =============================================================================
# BUSINESS CONFIGURATION
# =============================================================================

# Customer Segmentation
PREMIUM_LTV_THRESHOLD=5000.0
STANDARD_LTV_THRESHOLD=1000.0
HIGH_CHURN_THRESHOLD=0.7
MODERATE_CHURN_THRESHOLD=0.4

# Recommendation Engine
RECOMMENDATION_MIN_SCORE=0.5
RECOMMENDATION_MAX_ITEMS=10
RECOMMENDATION_DIVERSITY_FACTOR=0.3

# Insight Generation
INSIGHT_CONFIDENCE_THRESHOLD=0.6
INSIGHT_MAX_PROCESSING_TIME_MS=5000
INSIGHT_CACHE_DURATION_HOURS=24

# =============================================================================
# INTEGRATION CONFIGURATION
# =============================================================================

# External APIs
EXTERNAL_API_TIMEOUT=30
EXTERNAL_API_RETRY_COUNT=3
EXTERNAL_API_RETRY_DELAY=1

# Webhook Configuration
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com/events
WEBHOOK_SECRET=your-webhook-secret

# Email Notifications
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@company.com

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=customer-analytics-backups

# Disaster Recovery
DR_ENABLED=false
DR_REGION=us-east-1
DR_RTO_MINUTES=60  # Recovery Time Objective
DR_RPO_MINUTES=15  # Recovery Point Objective