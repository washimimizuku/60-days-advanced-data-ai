# Day 12: Apache Airflow Environment Configuration

# Airflow Core Configuration
AIRFLOW_HOME=/opt/airflow
AIRFLOW__CORE__DAGS_FOLDER=/opt/airflow/dags
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres:5432/airflow
AIRFLOW__CORE__LOAD_EXAMPLES=False
AIRFLOW__CORE__LOAD_DEFAULT_CONNECTIONS=False

# Security
AIRFLOW__CORE__FERNET_KEY=your-fernet-key-here-generate-with-python
AIRFLOW__WEBSERVER__SECRET_KEY=your-secret-key-here

# Webserver Configuration
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=True
AIRFLOW__WEBSERVER__RBAC=True
AIRFLOW__WEBSERVER__AUTHENTICATE=True
AIRFLOW__WEBSERVER__AUTH_BACKEND=airflow.auth.backends.password_auth

# Email Configuration
AIRFLOW__EMAIL__EMAIL_BACKEND=airflow.providers.sendgrid.utils.emailer.send_email
AIRFLOW__EMAIL__EMAIL_CONN_ID=sendgrid_default
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Database Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=airflow
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow

# Redis Configuration (for CeleryExecutor)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Scheduler Configuration
AIRFLOW__SCHEDULER__DAG_DIR_LIST_INTERVAL=300
AIRFLOW__SCHEDULER__CATCHUP_BY_DEFAULT=False
AIRFLOW__SCHEDULER__MAX_THREADS=2

# Logging Configuration
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO
AIRFLOW__LOGGING__FAB_LOGGING_LEVEL=WARN
AIRFLOW__LOGGING__COLORED_CONSOLE_LOG=True

# Performance Configuration
AIRFLOW__CORE__PARALLELISM=32
AIRFLOW__CORE__DAG_CONCURRENCY=16
AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG=16

# Development Settings
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=False
AIRFLOW__WEBSERVER__RELOAD_ON_PLUGIN_CHANGE=True

# Custom Variables
AIRFLOW_VAR_DATA_PATH=/opt/airflow/data
AIRFLOW_VAR_LOGS_PATH=/opt/airflow/logs
AIRFLOW_VAR_ENVIRONMENT=development