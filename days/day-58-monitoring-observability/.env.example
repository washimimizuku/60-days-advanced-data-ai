# Day 58: Monitoring & Observability - Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# Service Configuration
# =============================================================================
SERVICE_NAME=ml-prediction-service
ENVIRONMENT=production
SERVICE_VERSION=v1.0.0
DEPLOYMENT_REGION=us-west-2

# =============================================================================
# Prometheus Configuration
# =============================================================================
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9090
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# Metrics Collection
METRICS_PORT=8000
METRICS_PATH=/metrics
ENABLE_METRICS_COLLECTION=true
METRICS_COLLECTION_INTERVAL=10s

# =============================================================================
# Grafana Configuration
# =============================================================================
GRAFANA_HOST=localhost
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123
GRAFANA_DATABASE_TYPE=sqlite3
GRAFANA_DATABASE_PATH=/var/lib/grafana/grafana.db

# Dashboard Configuration
GRAFANA_DEFAULT_DASHBOARD=ml-overview
GRAFANA_THEME=dark
GRAFANA_TIMEZONE=UTC
ENABLE_GRAFANA_ANALYTICS=false

# =============================================================================
# Jaeger (Distributed Tracing) Configuration
# =============================================================================
JAEGER_HOST=localhost
JAEGER_UI_PORT=16686
JAEGER_COLLECTOR_PORT=14268
JAEGER_AGENT_PORT=6831

# Tracing Configuration
ENABLE_TRACING=true
TRACING_SAMPLE_RATE=0.1
JAEGER_SERVICE_NAME=ml-prediction-service
JAEGER_TAGS=environment=production,version=v1.0.0

# Storage Backend
JAEGER_SPAN_STORAGE_TYPE=elasticsearch
JAEGER_ES_SERVER_URLS=http://elasticsearch:9200
JAEGER_ES_INDEX_PREFIX=jaeger

# =============================================================================
# Elasticsearch Configuration
# =============================================================================
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_CLUSTER_NAME=ml-logging-cluster
ELASTICSEARCH_NODE_NAME=ml-log-node-1

# Index Configuration
ELASTICSEARCH_INDEX_PREFIX=ml-logs
ELASTICSEARCH_INDEX_PATTERN=ml-logs-*
ELASTICSEARCH_RETENTION_DAYS=30
ELASTICSEARCH_SHARDS=3
ELASTICSEARCH_REPLICAS=1

# Performance Settings
ELASTICSEARCH_HEAP_SIZE=2g
ELASTICSEARCH_MEMORY_LOCK=true
ELASTICSEARCH_MAX_MAP_COUNT=262144

# =============================================================================
# Logstash Configuration
# =============================================================================
LOGSTASH_HOST=localhost
LOGSTASH_BEATS_PORT=5044
LOGSTASH_HTTP_PORT=8080
LOGSTASH_PIPELINE_WORKERS=4
LOGSTASH_PIPELINE_BATCH_SIZE=125

# Input Configuration
ENABLE_BEATS_INPUT=true
ENABLE_HTTP_INPUT=true
ENABLE_KAFKA_INPUT=false
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPICS=ml-logs,data-pipeline-logs

# =============================================================================
# Kibana Configuration
# =============================================================================
KIBANA_HOST=localhost
KIBANA_PORT=5601
KIBANA_SERVER_NAME=ml-kibana
KIBANA_DEFAULT_INDEX=ml-logs-*

# UI Configuration
KIBANA_DEFAULT_ROUTE=/app/discover
KIBANA_MONITORING_ENABLED=true

# =============================================================================
# Alertmanager Configuration
# =============================================================================
ALERTMANAGER_HOST=localhost
ALERTMANAGER_PORT=9093
ALERTMANAGER_CLUSTER_PORT=9094

# Notification Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#ml-alerts
PAGERDUTY_SERVICE_KEY=your-pagerduty-service-key
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_FROM=alerts@company.com
EMAIL_TO=ml-team@company.com

# =============================================================================
# ML Model Monitoring Configuration
# =============================================================================

# Model Performance Thresholds
MODEL_ACCURACY_THRESHOLD=0.85
MODEL_LATENCY_P95_THRESHOLD=1.0
MODEL_LATENCY_P99_THRESHOLD=2.0
MODEL_ERROR_RATE_THRESHOLD=0.05

# Data Drift Detection
DATA_DRIFT_THRESHOLD=0.7
DATA_DRIFT_CHECK_INTERVAL=3600
ENABLE_DATA_DRIFT_ALERTS=true

# Feature Monitoring
FEATURE_DRIFT_THRESHOLD=0.6
FEATURE_IMPORTANCE_THRESHOLD=0.1
ENABLE_FEATURE_MONITORING=true

# Business Metrics
TRACK_BUSINESS_IMPACT=true
REVENUE_IMPACT_THRESHOLD=10000
COST_IMPACT_THRESHOLD=5000

# =============================================================================
# SLI/SLO Configuration
# =============================================================================

# Availability SLO
AVAILABILITY_SLO_TARGET=0.999
AVAILABILITY_TIME_WINDOW=30d
AVAILABILITY_ERROR_BUDGET_ALERT_THRESHOLD=50

# Latency SLO
LATENCY_SLO_TARGET=0.95
LATENCY_SLO_THRESHOLD=0.5
LATENCY_TIME_WINDOW=7d

# Accuracy SLO
ACCURACY_SLO_TARGET=0.85
ACCURACY_TIME_WINDOW=24h
ACCURACY_ERROR_BUDGET_ALERT_THRESHOLD=80

# =============================================================================
# Security Configuration
# =============================================================================

# Authentication
ENABLE_AUTHENTICATION=true
AUTH_METHOD=basic
LDAP_SERVER=ldap://ldap.company.com
LDAP_BASE_DN=dc=company,dc=com

# TLS/SSL Configuration
ENABLE_TLS=false
TLS_CERT_FILE=/etc/ssl/certs/monitoring.crt
TLS_KEY_FILE=/etc/ssl/private/monitoring.key
TLS_CA_FILE=/etc/ssl/certs/ca.crt

# API Keys and Tokens
GRAFANA_API_KEY=your-grafana-api-key
PROMETHEUS_API_TOKEN=your-prometheus-token
ELASTICSEARCH_API_KEY=your-elasticsearch-api-key

# =============================================================================
# Storage Configuration
# =============================================================================

# Data Retention
METRICS_RETENTION_DAYS=30
LOGS_RETENTION_DAYS=30
TRACES_RETENTION_DAYS=7

# Storage Paths
PROMETHEUS_DATA_PATH=/var/lib/prometheus
GRAFANA_DATA_PATH=/var/lib/grafana
ELASTICSEARCH_DATA_PATH=/var/lib/elasticsearch

# Backup Configuration
ENABLE_AUTOMATED_BACKUP=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_STORAGE_PATH=/backup/monitoring

# =============================================================================
# Performance Configuration
# =============================================================================

# Resource Limits
PROMETHEUS_MEMORY_LIMIT=4Gi
GRAFANA_MEMORY_LIMIT=1Gi
ELASTICSEARCH_MEMORY_LIMIT=4Gi
JAEGER_MEMORY_LIMIT=2Gi

# CPU Limits
PROMETHEUS_CPU_LIMIT=2
GRAFANA_CPU_LIMIT=1
ELASTICSEARCH_CPU_LIMIT=2
JAEGER_CPU_LIMIT=1

# Scaling Configuration
ENABLE_AUTO_SCALING=false
MIN_REPLICAS=1
MAX_REPLICAS=5
CPU_UTILIZATION_THRESHOLD=70
MEMORY_UTILIZATION_THRESHOLD=80

# =============================================================================
# Development and Testing Configuration
# =============================================================================

# Debug Settings
DEBUG_MODE=false
LOG_LEVEL=INFO
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_PROFILING=false

# Testing Configuration
ENABLE_SYNTHETIC_MONITORING=true
SYNTHETIC_CHECK_INTERVAL=60s
HEALTH_CHECK_TIMEOUT=30s

# Mock Data Generation
GENERATE_MOCK_METRICS=false
MOCK_METRICS_INTERVAL=10s
MOCK_PREDICTION_RATE=100

# =============================================================================
# Integration Configuration
# =============================================================================

# Kubernetes Integration
KUBERNETES_NAMESPACE=monitoring
KUBERNETES_SERVICE_ACCOUNT=monitoring-sa
ENABLE_KUBERNETES_DISCOVERY=true

# Cloud Provider Integration
CLOUD_PROVIDER=aws
AWS_REGION=us-west-2
ENABLE_CLOUDWATCH_INTEGRATION=false
ENABLE_AZURE_MONITOR_INTEGRATION=false
ENABLE_GCP_MONITORING_INTEGRATION=false

# External Services
DATADOG_API_KEY=your-datadog-api-key
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key
ENABLE_EXTERNAL_MONITORING=false

# =============================================================================
# Compliance and Governance
# =============================================================================

# Data Privacy
ENABLE_DATA_ANONYMIZATION=true
PII_SCRUBBING_ENABLED=true
GDPR_COMPLIANCE_MODE=true

# Audit Logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=365
AUDIT_LOG_ENCRYPTION=true

# Compliance Standards
SOC2_COMPLIANCE=true
HIPAA_COMPLIANCE=false
PCI_COMPLIANCE=false

# =============================================================================
# Advanced Configuration
# =============================================================================

# Custom Metrics
CUSTOM_METRICS_ENABLED=true
CUSTOM_METRICS_PREFIX=ml_custom
BUSINESS_METRICS_ENABLED=true

# Advanced Alerting
ENABLE_ANOMALY_DETECTION=true
ANOMALY_DETECTION_SENSITIVITY=medium
ENABLE_PREDICTIVE_ALERTING=false

# Machine Learning for Monitoring
ENABLE_ML_BASED_ALERTING=false
ML_MODEL_PATH=/models/alerting_model.pkl
ALERT_PREDICTION_THRESHOLD=0.8

# =============================================================================
# Experimental Features
# =============================================================================

# Feature Flags
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_BETA_DASHBOARDS=false
ENABLE_ADVANCED_ANALYTICS=false

# Research and Development
ENABLE_METRICS_RESEARCH=false
COLLECT_USAGE_ANALYTICS=false
ENABLE_A_B_TESTING=false